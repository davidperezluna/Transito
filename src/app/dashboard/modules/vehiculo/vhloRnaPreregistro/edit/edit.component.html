<div class="row">
    <div class="col-xs-12 col-lg-8">
        <div class="card">
            <div class="card-header">
                <b class="text-uppercase">Editar vehiculo RNA <span *ngIf="funcionario">({{ funcionario.organismoTransito.nombre }})</span></b>
                <br>
                <small>Los campos con <b class="text-danger"> <b class="text-danger">*</b></b> son obligatorios</small>
            </div>
            <div class="card-body">
                <form #formNew="ngForm">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-xs-12 col-lg-12">
                                <label>Tipo de registro <span class="text-danger"> <b class="text-danger">*</b></span></label>
                                <ng-select [multiple]="false" [options]="tiposMatricula" [(ngModel)]="vehiculo.tipoMatricula" required name="tipoMatricula">
                                </ng-select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6"  *ngIf="vehiculo.tipoMatricula != 'MATRICULA'">
                                <label>Placa <b class="text-danger">*</b></label>
                                <input class="form-control text-uppercase" [(ngModel)]="vehiculo.placa" name="placa" type="text" required>
                            </div>
                            <div class="col-lg-6">
                                <label>Valor</label>
                                <input class="form-control" [(ngModel)]="vehiculo.valor" type="text"  name="valor" required>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-lg-6">
                                <label>No Factura de compra</label>
                                <input class="form-control" [(ngModel)]="vehiculo.numeroFactura" name="numeroFactura" type="text">
                            </div> 
                            <div class="col-lg-3">
                                <label>Fecha Factura</label>
                                <input class="form-control" [(ngModel)]="vehiculo.fechaFactura" name="fechaFactura" type="date">
                            </div>
                        </div>

                        <div class="row"><!-- .row -->
                            <div class="col-xs-12 col-lg-3">
                                <label>Marca <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="marcas" [(ngModel)]="marcaSelected" (ngModelChange)="onChangedMarca($event)" name="idMarca" required>
                                </ng-select>
                            </div>
                            <div class="col-xs-12 col-lg-3">
                                <label>Linea <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="lineas" [(ngModel)]="lineaSelected" name="idLinea" required>
                                </ng-select>
                            </div>
                            <div class="col-xs-12 col-lg-3">
                                <label>Clase <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="clases" [(ngModel)]="claseSelected" (ngModelChange)="onChangedClase($event)" name="idClase" required>
                                </ng-select>
                            </div>
                            <div class="col-xs-12 col-lg-3">
                                <label>Carrocería <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="carrocerias" [(ngModel)]="carroceriaSelected" name="idCarroceria" required>
                                </ng-select>
                            </div>
                            <div class="col-xs-12 col-lg-3">
                                <label>Servicio <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="servicios" [(ngModel)]="servicioSelected" name="idServicio" required>
                                </ng-select>
                            </div>
                            <div class="col-xs-12 col-lg-3"> 
                                <label>Color <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="colores" [(ngModel)]="colorSelected"name="idColor" required>
                                </ng-select>
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Combustible <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="combustibles" [(ngModel)]="combustibleSelected" name="idCombustible" required>
                                </ng-select>
                            </div>

                            <div class="col-xs-12 col-lg-3" *ngIf="!funcionario">
                                <label>Organismo de transito <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="organismosTransito" [(ngModel)]="organismoTransitoSelected" name="idOrganismoTransito" required>
                                </ng-select>
                            </div> 

                            <div class="col-xs-12 col-lg-3">
                                <label>Numero Manifiesto</label> 
                                <input class="form-control" [(ngModel)]="vehiculo.numeroManifiesto" name="numeroManifiesto">
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Fecha Manifiesto</label>
                                <input class="form-control" type="date" [(ngModel)]="vehiculo.fechaManifiesto" name="fechaManifiesto">
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Cilindraje</label>
                                <input class="form-control" type="text" [(ngModel)]="vehiculo.cilindraje" name="cilindraje">
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Modelo</label>
                                <input class="form-control" type="text" [(ngModel)]="vehiculo.modelo" name="modelo">
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Motor</label>
                                <input class="form-control" type="text" type="text" [(ngModel)]="vehiculo.motor" name="motor">
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Chasis</label>
                                <input (blur)="onUpdate()" class="form-control" type="text" [(ngModel)]="vehiculo.chasis" name="chasis">
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Serie</label>
                                <input class="form-control" type="text" type="text" [(ngModel)]="vehiculo.serie" name="serie">
                            </div>
                            
                            <div class="col-xs-12 col-lg-3">
                                <label>Vin</label>
                                <input class="form-control" type="text" [(ngModel)]="vehiculo.vin" name="vin">
                            </div>
                            
                            <div class="col-xs-12 col-lg-3" *ngIf='vehiculo.idServicio == 2'>
                                <label>Radio Acción <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="radiosAccion" [(ngModel)]="radioAccionSelected" name="idRadioAccion" required>
                                </ng-select>
                            </div>
                            
                            <div class="col-xs-12 col-lg-3">
                                <label>Modalidad Transporte <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="modalidadesTransporte" [(ngModel)]="modalidadTransporteSelected" name="idModalidadTransporte"
                                    required>
                                </ng-select>
                            </div>

                            <div class="col-xs-12 col-lg-3">
                                <label>Numero ejes</label>
                                <input class="form-control" type="text" type="text" [(ngModel)]="vehiculo.numeroEjes" name="numeroEjes">
                            </div>
                            
                            <div class="col-xs-12 col-lg-3" *ngIf='vehiculo.idModalidadTransporte == 1 || vehiculo.idModalidadTransporte == 3'>
                                <label>Numero pasajeros</label>
                                <input class="form-control" type="text" type="text" [(ngModel)]="vehiculo.numeroPasajeros" name="numeroPasajeros">
                            </div>
                            
                            <div class="col-xs-12 col-lg-3" *ngIf='vehiculo.idModalidadTransporte == 2 || vehiculo.idModalidadTransporte == 3'>
                                <label>Capacidad carga</label>
                                <input class="form-control" type="text" type="text" [(ngModel)]="vehiculo.capacidadCarga" name="capacidadCarga">
                            </div>
                        </div><!-- .row -->

                        <div class="row" *ngIf="servicioSelected == 2">
                            <div class="col-xs-12 col-lg-12">
                                <b class="text-uppercase">Buscar empresa de afiliación</b>
                            </div>
                            <div class="col-xs-12 col-lg-12">
                                <label>NIT</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" [(ngModel)]="nitEmpresaTransporte" name="nitEmpresaTransporte"
                                        required />
                                    <span class="input-group-btn">
                                        <button (click)="onSearchEmpresaTransporte()" class="btn btn-primary" type="button">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row" *ngIf="empresaTransporte">
                            <div class="col-xs-12 col-lg-12">
                                <table class="table table-bordered table-striped">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <b>NIT: </b>
                                                <br>
                                                {{ empresaTransporte.nit }}
                                            </td>
                                            <td>
                                                <b>Nombre: </b>
                                                <br>
                                                {{ empresaTransporte.nombre }}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="row" *ngIf="vehiculo.tipoMatricula == 'RADICADO'">
                            <div class="col-xs-12 col-lg-12">
                                <label>Organismo de transito de que proviene <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="organismosTransitoNacional" [(ngModel)]="radicado.idOrganismoTransito" name="idOrganismoTransitoProviene" required>
                                </ng-select>
                            </div>
                            
                            <div class="col-xs-12 col-lg-6">
                                <label>No. licencia transito llegada</label>
                                <input class="form-control" type="text" type="text" [(ngModel)]="radicado.numeroLicencia" name="numeroLicencia">
                            </div>
                            <!--
    
                                <div class="col-xs-12 col-lg-3">
                                    <label>Fecha de expedición <b class="text-danger">*</b></label>
                                    <input class="form-control" [(ngModel)]="datos.fechaLicencia" name="fechaLicencia" type="date" required />
                                </div>
                            -->
                            
                            <div class="col-xs-12 col-lg-6">
                                <label>Fecha de ingreso <b class="text-danger">*</b></label>
                                <input class="form-control" [(ngModel)]="radicado.fechaIngreso" name="fechaIngreso" type="date" required />
                            </div>
        
                            <div class="col-xs-12 col-lg-6">
                                <label>Nro. guiá de llegada <b class="text-danger">*</b></label>
                                <input class="form-control" [(ngModel)]="radicado.guiaLlegada" name="guiaLlegada" type="text" required />
                            </div>
        
                            <div class="col-xs-12 col-lg-6">
                                <label>Empresa de envió <b class="text-danger">*</b></label>
                                <input class="form-control text-uppercase" [(ngModel)]="radicado.empresaEnvio" name="empresaEnvio" type="text" required />
                            </div>
                        </div>

                        <div class="row" *ngIf="vehiculo.idServicio == 2">
                            <div class="col-xs-12 col-lg-12">
                                <b class="text-uppercase">Buscar empresa de afiliación</b>
                            </div>
                            <div class="col-xs-12 col-lg-12">
                                <label>NIT</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" [(ngModel)]="nitEmpresaTransporte" name="nitEmpresaTransporte" required />
                                    <span class="input-group-btn">
                                        <button (click)="onSearchEmpresaTransporte()" class="btn btn-primary" type="button">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="row" *ngIf="empresaTransporte">
                            <div class="col-xs-12 col-lg-12">
                                <table class="table table-bordered table-striped">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <b>NIT: </b>
                                                <br>
                                                {{ empresaTransporte.nit }}
                                            </td>
                                            <td>
                                                <b>Nombre: </b>
                                                <br> 
                                                {{ empresaTransporte.nombre }}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="row" *ngIf="vehiculo.tipoMatricula == 'RADICADO' || vehiculo.tipoMatricula == 'IMPORTACION'">
                            <div class="col-xs-12 col-lg-12">
                                <label>Tipo de propiedad
                                    <span class="text-danger">
                                        <b class="text-danger">*</b>
                                    </span>
                                </label>
                                <ng-select [multiple]="false" [options]="tiposPropiedad" [(ngModel)]="datos.tipoPropiedad" name="tipoPropiedad" required>
                                </ng-select>
                            </div>
                        </div>

                
                        <div class="row" *ngIf="datos.tipoPropiedad && (vehiculo.tipoMatricula == 'RADICADO' || vehiculo.tipoMatricula == 'IMPORTACION' || vehiculo.tipoMatricula == 'MATRICULA') ">
                            <!--Cuando es de tipo propio -->
                            <div class="col-xs-12 col-lg-12">
                                <br>
                                <div class="custom-control custom-checkbox">
                                    <input [(ngModel)]="datos.solidario" name="solidario" type="checkbox" class="custom-control-input" id="solidario" checked="">
                                    <label class="custom-control-label" for="solidario">¿Tiene permisos para hacer tramites?</label>
                                </div>
                            </div>
                    
                            <div class="col-xs-8 col-lg-6">
                                <label>Tipo de identificación <b class="text-danger">*</b></label>
                                <ng-select [multiple]="false" [options]="tiposIdentificacion" [(ngModel)]="tipoIdentificacionSelected" name="idTipoIdentificacion" required >
                                </ng-select>
                            </div>
                    
                            <!--tipo identificacion ciudadano -->
                            <div class="col-xs-8 col-lg-6" *ngIf="tipoIdentificacionSelected != 4">
                                <label>Identificación</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" placeholder="Identificacion" [(ngModel)]="identificacion" name="identificacion" required />
                                    <span class="input-group-btn">
                                        <button (click)="onSearchCiudadano()"class="btn btn-default" type="button">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>

                            <!--tipo identificacion nit -->
                            <div class="col-xs-8 col-lg-6" *ngIf="tipoIdentificacionSelected == 4">
                                <label>NIT</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" placeholder="NIT" [(ngModel)]="nit" name="nit" required />
                                    <span class="input-group-btn">
                                        <button (click)="onSearchEmpresa()" class="btn btn-primary" type="button">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>

                            <div class="col-xs-12 col-lg-12" *ngIf="ciudadano">
                                <div class="row">
                                    <div class="col-xs-12 col-lg-12">
                                        <div class="custom-control custom-checkbox">
                                            <input [(ngModel)]="datos.solidario" name="solidario" type="checkbox" class="custom-control-input" id="solidario" checked="">
                                            <label class="custom-control-label" for="solidario">¿Tiene permisos para hacer tramites?</label>
                                        </div>
                                    </div>
                                    <table class="table table-bordered table-striped" id="dataTables-example">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <b>Tipo de identificación: </b>
                                                    <br> {{ ciudadano.tipoIdentificacion.nombre }}
                                                    <br>
                                                    <b>Numero de identificación: </b>
                                                    <br> {{ ciudadano.identificacion }}
                                                </td>
                                                <td>
                                                    <b>Nombres y apellidos: </b>
                                                    <br> {{ ciudadano.primerNombre }} {{ ciudadano.segundoNombre }} {{ ciudadano.primerApellido }} {{ ciudadano.segundoApellido
                                                    }}
                                                </td>
                                                <td>
                                                    <div class="btn-group btn-group-justified">
                                                        <div class="btn-group">
                                                            <button (click)="onAddCiudadano()" class="btn btn-primary">
                                                                <i class="fa fa-plus"></i>
                                                                Agregar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="col-xs-12 col-lg-12" *ngIf="empresa">
                                <!-- Empresa -->
                                <div class="row">
                                    <div class="col-xs-12 col-lg-12">
                                        <div class="custom-control custom-checkbox">
                                            <input [(ngModel)]="datos.solidario" name="solidario" type="checkbox" class="custom-control-input" id="solidario" checked="">
                                            <label class="custom-control-label" for="solidario">¿Tiene permisos para hacer tramites?</label>
                                        </div>
                                    </div>
                                    <table class="table table-bordered table-striped" id="dataTables-example">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <b>NIT: </b>
                                                    <br> {{ empresa.nit }}
                                                    <br>
                                                    <b>Nombre: </b>
                                                    <br> {{ empresa.nombre }}
                                                    <br>
                                                    <b>Representante legal: </b>
                                                    <br> {{ empresa.ciudadano.primerNombre }} {{ empresa.ciudadano.primerApellido }}
                                                </td>
                                                <td>
                                                    <b>Tipo empresa: </b>
                                                    <br> {{ empresa.nombre }}
                                                    <br>
                                                    <b>Municipio: </b>
                                                    <br> {{ empresa.municipio.nombre }}
                                                    <b>Dirección: </b>
                                                    <br> {{ empresa.direccion }}
                                                </td>
                                                <td>
                                                    <div class="btn-group">
                                                        <button (click)="onAddEmpresa()" class="btn btn-primary">
                                                            <i class="fa fa-plus"></i>
                                                            Agregar
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="col-xs-12 col-lg-12" *ngIf="datos.propietarios && datos.propietarios.length > 0">
                                <table class="table table-bordered table-striped" id="dataTables-example">
                                    <br>
                                    <thead>
                                        <tr>
                                            <th colspan="3" class="text-center">
                                                <b class="text-uppercase">Propietarios a registrar</b>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let propietario of datos.propietarios; let i = index">
                                            <td>
                                                <b>Solicitante: </b>
                                                <br> {{ propietario.identificacion }}
                                                <br> {{ propietario.nombre }}
                                                <br>
                                                <span *ngIf="propietario.permiso" class="text-success">
                                                    <b>Autorizado</b> para realizar trámites.
                                                </span>
                                                <span *ngIf="!propietario.permiso" class="text-danger">
                                                    <b>No autorizado</b> para realizar trámites.
                                                </span>
                                            </td>
                                            <td *ngIf="propietario.idApoderado">
                                                <b>Apoderado: </b>
                                                <br> {{ propietario.apoderadoIdentificacion }}
                                                <br> {{ propietario.apoderadoNombre }}
                                                <br>
                                            </td>
                                            <td *ngIf="!propietario.idApoderado">
                                                <div class="btn-group btn-group-justified">
                                                    <div class="btn-group">
                                                        <button (click)="onNewApoderado(propietario)" class="btn btn-xs btn-primary">Agregar apoderado</button>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <button (click)="onDeletePropietario(propietario)" class="btn btn-xs btn-danger">Eliminar</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                                            
                            <!--si no existe un ciudadano -->
                            <!-- <app-new-rna-ciudadano *ngIf="ciudadanoNew" [tipoIdentificacion]="tipoIdentificacionSelected" [identificacion]="identificacion" (ready)="ready($event)"></app-new-rna-ciudadano> -->
                        </div>
                    </div>

                    <div class="from-group" *ngIf="formApoderado"><!-- .form-group -->
                        <div class="row"><!-- .row -->
                            <!-- agregar apoderado -->
                            <div class="col-xs-12 col-lg-12">
                                <b class="text-uppercase">
                                    Buscar Apoderado
                                </b>
                            </div>

                            <div class="col-xs-12 col-lg-12" >
                                <label>Identificación</label>
                                <div  class="input-group">
                                    <input type="number" class="form-control" placeholder="Identificacion apoderado" [(ngModel)]="identificacionApoderado" name="identificacionApoderado" required />
                                    <span class="input-group-btn">
                                        <button (click)="onSearchApoderado()" class="btn btn-default" type="button">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>                                    
                            </div>

                            <!--si existe el apoderado -->
                            <div class="col-xs-12 col-lg-12" *ngIf="apoderado">
                                <table class="table table-bordered table-striped" id="dataTables-example">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <b>Tipo de identificación</b>
                                                <br>
                                                {{ apoderado.tipoIdentificacion.nombre }}
                                                <br>
                                                <b>Numero de identificación</b>
                                                <br>
                                                {{ apoderado.identificacion }}
                                            </td>
                                            <td>
                                                <b>Nombres y apellidos</b>
                                                <br>{{ apoderado.primerNombre }}  {{ apoderado.segundoNombre }} {{ apoderado.primerApellido }} {{ apoderado.segundoApellido }}
                                            </td>
                                            <td>
                                                <div class="btn-group">
                                                    <button (click)="onAddApoderado(apoderado)" class="btn btn-primary">
                                                        <i class="fa fa-plus"></i>
                                                        Agregar
                                                    </button>
                                                    <button class="btn btn-danger" (click)="onCancelarApoderado()">
                                                        <i class="fa fa-times"></i>
                                                        Cancelar
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>  
                        </div><!-- /.row -->
                    </div><!-- /.form-group -->
                </form>
            </div>
            <div class="card-footer">
                <div class="btn-group">
                    <button (click)="onEnviar()" class="btn btn-primary">
                        <i class="fa fa-save"></i>
                        Enviar
                    </button>
                    <button (click)="onCancelar()" class="btn btn-default">
                        <i class="fa fa-times"></i>
                        Cancelar
                    </button>
                </div>
            </div>    
        </div>
    </div>
</div>