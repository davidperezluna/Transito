<div class="container" >
    <hr>
    <div class="row" *ngIf='formIndex'>
       <div class="col-md-12">
          <div class="card">
             <div class="card-header">
                <h5 class="card-title">
                   <b class="text-uppercase">Plan estratégico de seguridad vial <small>Buscar</small></b>
                   <br>
                </h5>
             </div>
             <div class="card-body">
                <div class="row">
                   <!-- .row -->
                   <div class="col-xs-12 col-lg-12">
                      <div class="input-group" [ngClass]="{'has-danger' : isError,'has-success': isExist}">
                         <!-- <input type="text" class="form-control" placeholder="Número de factura" [(ngModel)]="numeroFactura.numeroFactura" name="numeroFactura" required /> -->
                         <input type="text" class="form-control" placeholder="NIT,Nombre empresa." [(ngModel)]="parametro" name="parametro" required />
                         <span class="input-group-btn">
                         <button (click)="onKeyValidateEvaluacion()" [ngClass]="{'btn-danger' : isError}" class="btn btn-default btn-success" type="button"><i class="fa fa-search"></i></button>
                         </span>
                         <!--div de mensaje que no tiene revisión-->
                         <div class="container" *ngIf="revisionMensaje">
                            <div class="form-control-feedback has-danger has-error">La Empresa no tiene revisión</div>
                            <br>
                         </div>
                         <!--fin-->
                      </div>
                      <br>
                      
                      <div class="has-danger" *ngIf="isError" >
                         <div class="form-control-feedback has-danger has-error">{{msj}}</div>
                         <br>                   
                         <div class="btn-group pull-right">
                            <button (click)="onNew()" class="btn btn-info" type="button" ><span class="text">Agregar Empresa</span> <i class="ti-save ml-2"></i></button>
                         </div>
                         <div *ngIf="newEmpresa">
                            <app-new-empresa (ready)="ready($event)"></app-new-empresa>
                         </div>
                      </div>
                      <!--boton agregar revision-->
                      <div class="btn-group pull-right" *ngIf="habilitarBotonRev">
                        <button (click)="onNewRevision()" class="btn btn-info" type="button" ><span class="text">Agregar Revisión</span> <i class="ti-save ml-2"></i></button>
                     </div>
                     <!--fin-->
                      <div class="container" *ngIf="revisionNew">
                         <div>
                            <app-newRevision *ngIf="revisionNew" (ready)="ready($event)"></app-newRevision>
                         </div>
                      </div>
                      <div class="has-success" *ngIf="isExist" >
                         <div class="form-control-feedback has-danger has-success">{{msj}}</div>
                         <br> 
                         <!-- tabla de detalles de la empresa -->
                         <div class="col-xs-12 col-lg-12" >
                            <h5 class="card-title">Detalles de la revisión y empresa</h5>
                            <table class="table table-bordered">
                               <thead>
                                  <tr>
                                     <th><b>Fecha de recepción</b></th>
                                     <th><b>Fecha de devolución</b></th>
                                     <th><b>Fecha de otorgamiento</b></th>
                                     <th><b>Funcionario que revisa</b></th>
                                     <th><b>Persona contacto</b></th>
                                     <th><b>Cargo</b></th>
                                     <th><b>Correo electrónico</b></th>
                                  </tr>
                               </thead>
                               <tbody>
                                  <tr class="odd" *ngFor="let revision of revisiones; let i = index">
                                     <td>
                                        {{revision.fechaRecepcion}}
                                     </td>
                                     <td> 
                                        {{revision.fechaDevolucion}}
                                     </td>
                                     <td> 
                                        {{revision.fechaOtorgamiento}}
                                     </td>
                                     <td> 
                                        {{revision.funcionario.ciudadano.usuario.primerNombre}} {{revision.funcionario.ciudadano.usuario.segundoNombre}} {{revision.funcionario.ciudadano.usuario.primerApellido}}
                                     </td>
                                     <td> 
                                        {{revision.personaContacto}}
                                     </td>
                                     <td> 
                                        {{revision.cargo}}
                                     </td>
                                     <td> 
                                        {{revision.correo}}
                                     </td>
                                  </tr>
                               </tbody>
                            </table>
                            <table class="table table-bordered">
                               <thead>
                                  <tr>
                                     <th><b>Nombre empresa</b></th>
                                     <th><b>NIT</b></th>
                                     <th><b>Ciudad Sede P.</b></th>
                                     <th><b>Dirección</b></th>
                                     <th><b>Teléfono</b></th>
                                  </tr>
                               </thead>
                               <tbody *ngIf="isExist">
                                  <tr class="odd" *ngFor="let empresa of empresas; let i = index">
                                     <td>
                                        {{empresa.nombre}}
                                     </td>
                                     <td> 
                                        {{empresa.nit}}
                                     </td>
                                     <td> 
                                        {{empresa.municipio.nombre}}
                                     </td>
                                     <td> 
                                        {{empresa.direccion}}
                                     </td>
                                     <td> 
                                        {{empresa.telefono}}
                                     </td>
                                  </tr>
                               </tbody>
                            </table>
                         </div>
                         <div class="card-body">
                          <!-- Nav tabs -->
                          <ul class="nav nav-tabs" role="tablist">
                             <li class="nav-item" *ngFor="let msvCategoria of msvCategorias; let i = index">
                                <a class="nav-link" data-toggle="tab" href="#{{msvCategoria.nombre}}" role="tab">{{msvCategoria.nombre}}
                                </a>
                             </li>
                          </ul>
                          <div class="tab-content">
                             <div class="tab-pane" id="1" role="tabpanel">
                              <app-new-fortalecimiento  [msvCategoria] = "msvCategoria" (ready)="ready($event)"></app-new-fortalecimiento>
                             </div>
                          </div>
                          <div class="tab-content">
                            <div class="tab-pane" id="2" role="tabpanel">
                               <h4 class="card-title" style="text-align: center;">COMPORTAMIENTO HUMANO</h4>
                            </div>
                         </div>
                       </div>
                         <!-- fin detalles de la empresa -->
                      </div>
                   </div>
                </div>
             </div>
          </div>
       </div>
    </div>
 </div>