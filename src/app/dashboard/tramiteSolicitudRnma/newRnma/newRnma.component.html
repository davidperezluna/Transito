<div class="row"><!-- .row -->
    <div class="col-xs-12 col-lg-4"><!-- .col -->
        <div class="input-group" [ngClass]="{'has-danger' : isError}">
            <input type="text" class="form-control" placeholder="Vin,Chasis,Placa,Motor,Serie" [(ngModel)]="tramiteSolicitud.vehiculoId"
                name="placaVehiculo" required />
            <span class="input-group-btn">
                <button (click)="onSearchVehiculo()" [ngClass]="{'btn-danger' : isError}" class="btn btn-default btn-success" ngxclipboard=""
                    type="button">
                    <i class="fa fa-search"></i>
                </button>
            </span>
        </div>

        <div class="has-danger" *ngIf="isError">
            <div class="form-control-feedback has-danger has-error">{{mensaje}}</div>
        </div>
    </div><!-- /.col -->
</div><!-- /.row -->

<div class="container" *ngIf="vehiculo">
    <div class="row"><!-- .row -->
        <div class="col-xs-12 col-lg-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">
                        <small>Detalles de vehiculo encontrado</small>
                    </h5>
                </div>
                <div class="card-body"><!-- .card-body -->
                    <div class="col-xs-12 col-lg-12">
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                    <td>
                                        <b>Placa</b>
                                        {{vehiculo.placa?.numero}}
                                    </td>
                                    <td>
                                        <b>Motor</b>
                                        {{vehiculo.motor}}
                                    </td>
                                    <td>
                                        <b>Servicio</b>
                                        {{vehiculo.servicio.nombre}}
                                    </td>
                                    <td>
                                        <b>Tipo</b>
                                        {{vehiculo.clase?.nombre}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="col-xs-12 col-lg-12" *ngIf="ciudadanosVehiculo">
                        <label>Propietarios
                            <span class="text-danger">*</span>
                        </label>
                        <table class="table table-bordered" *ngIf="isCiudadano">
                            <tbody>
                                <tr *ngFor="let ciudadanoVehiculo of ciudadanosVehiculo; let i = index">
                                    <td>
                                        <strong>Nombre: </strong>
                                        {{ciudadanoVehiculo.ciudadano?.usuario.primerNombre}} {{ciudadanoVehiculo.ciudadano?.usuario.primerApellido}}
                                    </td>
                                    <td>
                                        <strong>Identificación: </strong>
                                        {{ciudadanoVehiculo.ciudadano?.usuario.identificacion}}
                                    </td>
                                    <td>
                                        <div class="custom-control custom-radio">
                                            <input [(ngModel)]="tramiteSolicitud.solicitanteId" value="{{ciudadanoVehiculo.id}}" type="radio" id="customRadio1" name="customRadio"
                                                class="custom-control-input" checked="">
                                            <label class="custom-control-label" for="customRadio1">Solicitante</label>
                                        </div>
                                    </td>
                                    <td>
                                        <p *ngIf='apoderado'>
                                            <strong>Apoderado: </strong>
                                            {{apoderado.primerNombre}} {{apoderado.segundoNombre}} {{apoderado.primerApellido}} {{apoderado.segundoApellido}}
                                            <button (click)="cerrarApoderado()" class="btn btn-danger" ngxclipboard="" type="button">
                                                <i class="fa fa-close"></i>
                                            </button>
                                        </p>
                                        <button *ngIf='!frmApoderado && !apoderado' (click)="agregarApoderado()" class="btn btn-primary" [disabled]='!tramiteSolicitud.solicitanteId'>Agregar apoderado</button>
                                        <div *ngIf='frmApoderado && !apoderado' class="col-xs-12 col-lg-12 form-group">
                                            <div class="input-group" [class.has-success]="apoderadoEncontrado === 2" [class.has-danger]="apoderadoEncontrado === 3">
                                                <input type="number" class="form-control" placeholder="Identificacion apoderado" [(ngModel)]="identificacionApoderado" name="identificacionApoderado"
                                                    required />
                                                <span class="input-group-btn">
                                                    <button (click)="onKeyApoderado()" [class.btn-default]="apoderadoEncontrado === 1" [class.btn-success]="apoderadoEncontrado === 2"
                                                        [class.btn-danger]="apoderadoEncontrado === 3" class="btn" ngxclipboard=""
                                                        type="button">
                                                        <i class="fa fa-search"></i>
                                                    </button>
                                                </span>
                                                <span class="input-group-btn">
                                                    <button (click)="cerrarApoderado()" class="btn btn-danger" ngxclipboard="" type="button">
                                                        <i class="fa fa-close"></i>
                                                    </button>
                                                </span>
                                            </div>
                                            <div class="has-danger" *ngIf="apoderadoEncontrado === 3">
                                                <div class="form-control-feedback has-danger has-error">No se encontró el apoderado</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!--si existe el apoderado -->
                        <div class="container form-group" *ngIf="apoderadoEncontrado === 2">
                            <h5 class="container">
                                Resultados de búsqueda
                            </h5>
                            <table class="table " id="dataTables-example">
                                <tbody>
                                    <tr class="odd">
                                        <td>Tipo de identificación</td>
                                        <td class="center">
                                            <p>{{apoderadoSelect.tipoIdentificacion.nombre}}</p>
                                        </td>
                                        <td>Numero de identificación</td>
                                        <td class="center">
                                            <p>{{apoderadoSelect.identificacion}}</p>
                                        </td>
                                    </tr>
                                    <tr class="odd">
                                        <td>Primer nombre</td>
                                        <td class="center">
                                            <p>{{apoderadoSelect.primerNombre}}</p>
                                        </td>
                                        <td>Segundo nombre</td>
                                        <td class="center">
                                            <p>{{apoderadoSelect.segundoNombre}}</p>
                                        </td>
                                    </tr>
                                    <tr class="odd">
                                        <td>Primer apellido</td>
                                        <td class="center">
                                            <p>{{apoderadoSelect.primerApellido}}</p>
                                        </td>
                                        <td>Segundo apellido</td>
                                        <td class="center">
                                            <p>{{apoderadoSelect.segundoApellido}}</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="btn-group">
                                <button class="btn btn-default" (click)="cerrarApoderado()">
                                    <i class="fa fa-times"></i>
                                </button>
                                <button class="btn btn-primary" (click)="btnNewApoderado()">
                                    <i class="fa fa-save"></i>
                                </button>
                            </div>
                        </div>

                        <table class="table table-bordered" *ngIf="isEmpresa">
                            <thead>
                                <tr>
                                    <th>Solicitante Empresa</th>
                                    <th>Acción</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let ciudadanoVehiculo of ciudadanosVehiculo; let i = index">
                                    <td>
                                        <strong>Nit: </strong>
                                        {{ciudadanoVehiculo.empresa?.nit}}
                                        <br>
                                        <strong>Nombre: </strong>
                                        {{ciudadanoVehiculo.empresa?.nombre}}
                                    </td>
                                    <td>
                                        <label class="custom-control custom-radio" for="3option3">
                                            <input [(ngModel)]="tramiteSolicitud.solicitanteId" value="{{ciudadanoVehiculo.id}}" type="radio" required>
                                            <span class="custom-control-indicator"></span>
                                            <span class="custom-control-description">Solicitante</span>
                                        </label>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="row"><!-- .row -->
                        <div class="col-xs-12 col-lg-4"><!-- .col -->
                            <label>Facturas
                                <span class="text-danger">*</span>
                            </label>
                            <div class="input-group" [ngClass]="{'has-danger' : isError}">
                                <input type="text" class="form-control" placeholder="Número de factura" [(ngModel)]="facturaSelected" name="factura" required />
                                <span class="input-group-btn">
                                    <button (click)="onSearchFactura(facturaSelected)" [ngClass]="{'btn-danger' : isError}" class="btn btn-success" type="button">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div><!-- /.col -->
                    </div><!-- /.row -->
                </div><!-- /.card-body -->
                <div class="card-footer"><!-- .card-footer -->
                    <button class="btn btn-default" (click)="onCancelar()">
                        <i class="fa fa-times"></i>
                        Cancelar
                    </button>
                    <button class="btn btn-success" (click)="finalizarSolicitud()" [disabled]="isTramites">
                        <i class="fa fa-save"></i>
                        Enviar
                    </button>
                </div><!-- /.card-footer -->
            </div>
        </div>
    </div><!-- /.row -->

    <div class="container-fluid" *ngIf="factura">
        <div class="card col-md-12 col-md-16">
            <div class="card-header">
                <h6 class="card-title">Tramites</h6>
            </div>
            <div class="card-body">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item" *ngFor="let tramiteFactura of tramitesFactura; let i = index">
                        <a class="nav-link" data-toggle="tab" href="#{{tramiteFactura.tramitePrecio.tramite.formulario}}" role="tab">{{tramiteFactura.tramitePrecio.nombre}}
                            <i *ngIf="tramiteFactura.realizado" class="fa fa-dot-circle-o text-success"></i>
                        </a>
                        <!-- <a class="nav-link " data-toggle="tab" href="#realizado"  role="tab">{{tramiteFactura.tramitePrecio.nombre}} <i class="fa fa-dot-circle-o text-success"></i></a>  -->
                    </li>
                    <li class="nav-item" *ngIf='sustrato'>
                        <a class="nav-link " data-toggle="tab" href="#sustrato" role="tab">Sustrato </a>
                    </li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">
                    <div class="tab-pane" id="realizado" role="tabpanel">
                        <h4 class="card-title" style="text-align: center;">Tramite realizado</h4>
                    </div>
                    <div class="tab-pane" id="sustrato" role="tabpanel">
                        <appRnma-sustrato [factura]="factura" [ciudadanoPropietario]="ciudadano" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-sustrato>
                    </div>
                    <!-- <div class="tab-pane" id="25" role="tabpanel"> 
                  <appRnma-rematricula  (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-rematricula>
                  </div> -->
                    <div class="tab-pane" id="rnma-matriculainicial" role="tabpanel">
                        <appRnma-matricula-inicial [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-matricula-inicial>
                    </div>
                    <div class="tab-pane" id="rnma-insripcionaletarprenda" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-inscripcion-alerta-prenda [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-inscripcion-alerta-prenda>
                    </div>
                    <div class="tab-pane" id="rnma-traspaso" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-traspaso [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-traspaso>
                    </div>

                    <div class="tab-pane" id="rnma-trapasoindeterminada" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-traspaso-indeterminada [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-traspaso-indeterminada>
                    </div>

                    <div class="tab-pane" id="rnma-radicadocuenta" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-radicado-cuenta [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-radicado-cuenta>
                    </div>
                    <div class="tab-pane" id="rnma-traslado" role="tabpanel" *ngIf='ciudadano'>
                        <app-new-trasladoRnma [vehiculo]="vehiculo" [tramitesFactura]="tramitesFactura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></app-new-trasladoRnma>
                    </div>
                    <div class="tab-pane" id="rnma-cambiocolor" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-cambio-color [vehiculo]="vehiculo" [factura]="factura" [tramitesFactura]="tramitesFactura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-cambio-color>
                    </div>
                    <div class="tab-pane" id="rnma-cambioservicio" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-cambio-servicio [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-cambio-servicio>
                    </div>
                    <div class="tab-pane" id="rnma-regrabarmotor" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-regrabar-motor [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-regrabar-motor>
                    </div>
                    <div class="tab-pane" id="rnma-regrabarchasis" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-regrabar-chasis [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-regrabar-chasis>
                    </div>
                    <div class="tab-pane" id="rnma-regrabarserie" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-regrabar-serie [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-regrabar-serie>
                    </div>
                    
                    <div class="tab-pane" id="rnma-duplicado-licencia" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-duplicado-licencia [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-duplicado-licencia>
                    </div>
                    <div class="tab-pane" id="rnma-cancelacionmatricula" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-cancelacionMatricula [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-cancelacionMatricula>
                    </div>
                    <div class="tab-pane" id="rnma-cambioplaca" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-cambio-placa [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-cambio-placa>
                    </div>
                    <div class="tab-pane" id="rnma-dupicadoplaca" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-duplicado-placa [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-duplicado-placa>
                    </div>
                    <div class="tab-pane" id="rnma-cambiomotor" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-cambio-motor [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-cambio-motor>
                    </div>
                    <div class="tab-pane" id="rnma-blindaje" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-blindaje [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-blindaje>
                    </div>
                    <!-- <div class="tab-pane" id="rnma-traslado" role="tabpanel" *ngIf='ciudadano'>
                  <app-new-trasladoRnma [vehiculo] = "vehiculo" [factura] = "factura"  [tramitesFactura] = "tramitesFactura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></app-new-trasladoRnma>
               </div> -->
                    <div class="tab-pane" id="rnma-cambiocombustible" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-cambio-combustible [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-cambio-combustible>
                    </div>
                    <div class="tab-pane" id="rnma-cambiocarroceria" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-cambio-carroceria [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-cambio-carroceria>
                    </div>
                    <div class="tab-pane" id="rnma-regrabarvin" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-regrabar-vin [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-regrabar-vin>
                    </div>
                    <div class="tab-pane" id="rnma-registromaquinaria" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-new-registroMaquinaria [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-new-registroMaquinaria>
                    </div>
                  
                    

                    <div class="tab-pane" id="rnma-ceritificadotradicion" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-certificadoTradicion [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-certificadoTradicion>
                    </div>
                    <div class="tab-pane" id="rnma-levantamientoalertaprenda" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-levantamiento-alerta-prenda [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-levantamiento-alerta-prenda>
                    </div>

                    <div class="tab-pane" id="rnma-inscripcionalertaprenda" role="tabpanel" *ngIf='ciudadano'>
                        <appRnma-inscripcion-alerta-prenda [vehiculo]="vehiculo" [factura]="factura" (readyTramite)="readyTramite($event)" (cancelarTramite)="cancelarTramite($event)"></appRnma-inscripcion-alerta-prenda>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>